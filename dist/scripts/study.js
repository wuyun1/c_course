$(function(t){function e(e){var n="/chapters/menu.json",a=t("#list_chap"),s=t("#iframe_main");a.text("正在加载目录。。。"),t.getJSON(n,function(n){a.text(""),i=0,c=0;var r=n.list;r.forEach(function(e){var n=t("<li/>");t("<h4/>").text(e.title).appendTo(n);var r=t("<ol/>");e.list.forEach(function(e){var n=t("<li/>").text(e.title);n.attr("ref_id",e.data),n.attr("count_id",c),n.click(function(){var e=t(this).attr("ref_id");location.hash=e,s.attr("src","/chapters/h"+e+".html"),t.get("/chapters/code"+e+".txt",function(e){t("#tip").hide(400),o.setValue(e),t("#div_ouput").text("运行结果窗口")}),i=+t(this).attr("count_id"),t("li.active",a).removeClass("active"),n.addClass("active"),setTimeout(function(){t("#btn_solder").click()},400)}),n.appendTo(r),c++}),r.appendTo(n),n.appendTo(a)}),e&&t("[ref_id='"+e.slice(1)+"']",a).click()})}t.getScript("/scripts/hackback.js").done();var i=0,c=0,o=CodeMirror.fromTextArea(document.getElementById("codEdeit"),{lineNumbers:!0,matchBrackets:!0,mode:"text/x-csrc",keyMap:"sublime",autoCloseBrackets:!0,showCursorWhenSelecting:!0,theme:"midnight",tabSize:2});t.get("chapters/code_hollc.txt",function(e){o.setValue(e),t("#div_ouput").text("运行结果窗口")});var n=!1;t("#btn_run").click(function(){n||(t("#div_ouput").text("正在编译并运行。。。"),n=!0,t.getJSON("/serverapi/runC",{code:o.getValue()},function(e){t("#div_ouput").text(e.d),e.e?t("#tip_content").text("运行错误"):t("#tip_content").text("运行正确"),t("#tip").show(300),n=!1}))}),t("#try_again").click(function(){t("#tip").hide(400)}),t("#next").click(function(){if(t("#tip").hide(400),t("#btn_solder").click(),c-1>i){var e="[count_id='"+(i+1)+"']";setTimeout(function(){t(e).click()},500)}else confirm("已经到最后一章的课程，是否返回主页？")&&(location.href="/")});var a=!0;t("#btn_solder").click(function(){a?(t("#sitebar").css("transform","translate(100%)"),t(this).removeClass("btn_solder_open").addClass("btn_solder_close"),a=!1,t("#mask").hide(0)):(t("#sitebar").css("transform","translate(0%)"),t(this).removeClass("btn_solder_close").addClass("btn_solder_open"),a=!0,t("#mask").show(0))}),e(location.hash)});